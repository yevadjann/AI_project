<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIspire</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style_index.css') }}">
</head>
<body>
    <nav class="navbar custom-navbar d-flex align-items-center"> 
        <div class="navbar-top d-flex align-items-center">
            <a href="#" class="navbar-brand me-3">AIspire</a>
            <ul class="navbar-menu d-flex" id="navMenu" style="list-style: none; margin: 0; padding: 0;">
                <li class="nav-item"><a class="nav-link" href="#">Home</a></li>
            </ul>
        </div>
    </nav>
    
    <div class="container mt-4">
        <h1 class="text-center">AI Motivational Letter Chatbox</h1>
        
        <div class="card p-3 mb-3 shadow">
            <div class="card-body chat-container border p-3" id="chatbox">
            </div>
        </div>
        
        <div class="input-group">
            <input type="text" id="userInput" class="form-control" placeholder="Enter your abilities...">
            <button class="btn btn-primary" onclick="sendMessage()">Send</button>
        </div>
    </div>

    <script>
        function sendMessage() {
    const userInput = document.getElementById('userInput').value.trim();
    if (userInput === '') return;

    addMessage(userInput, 'user-message');
    document.getElementById('userInput').value = '';

    fetch('/get_response', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ message: userInput })
            })
            .then(response => response.json())
            .then(data => {
                // Add AI-generated response to the chat
                addMessage(data.response, 'ai-message');
            })
            .catch(error => {
                // Handle errors if the API request fails
                addMessage("An error occurred. Please try again later.", 'ai-message');
            });
        
}

function addMessage(text, type) {
    const chatbox = document.getElementById('chatbox');
    const messageDiv = document.createElement('div');
    messageDiv.classList.add('message', type);
    messageDiv.textContent = text;

    chatbox.appendChild(messageDiv);
    chatbox.scrollTop = chatbox.scrollHeight;
}

    </script>
    
</body>
</html>
